<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Pasien - MedixCare</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/global.css">
    <link rel="stylesheet" href="assets/css/patient.css">
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body id="patient-dashboard">
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header"><i data-feather="activity"></i><h2>MedixCare</h2></div>
            <nav class="sidebar-nav">
                <!-- REVISI: Menggunakan data-view untuk navigasi SPA -->
                <a href="#" data-view="home" class="nav-link active"><i data-feather="home"></i><span>Beranda</span></a>
                <a href="#" data-view="appointments" class="nav-link"><i data-feather="calendar"></i><span>Janji Temu</span></a>
                <a href="#" data-view="documents" class="nav-link"><i data-feather="file-text"></i><span>Dokumen Saya</span></a>
                <a href="#" data-view="profile" class="nav-link"><i data-feather="user"></i><span>Profil</span></a>
            </nav>
            <div class="sidebar-footer"><a href="index.html" class="nav-link"><i data-feather="log-out"></i> <span>Logout</span></a></div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                 <!-- REVISI: Menambahkan ID untuk judul dinamis -->
                <h1 id="main-header-title">Selamat Datang, <span id="patient-name"></span></h1>
                <div class="user-profile"><img src="https://i.pravatar.cc/40?u=patient" alt="Avatar"></div>
            </header>

            <!-- REVISI: Konten dibungkus dalam view-container -->
            <!-- Home View -->
            <div id="home-view" class="view-container">
                <div class="card">
                    <div class="card-header"><h3>Janji Temu Berikutnya</h3></div>
                    <div class="card-body"><div class="appointment-card" id="upcoming-appointment-details"></div></div>
                </div>
                <div class="card">
                    <div class="card-header"><nav class="tab-nav"><span class="tab-link active" data-tab="riwayat">Riwayat Medis</span><span class="tab-link" data-tab="hasil-lab">Hasil Lab</span><span class="tab-link" data-tab="tagihan">Tagihan</span></nav></div>
                    <div class="card-body">
                        <div id="riwayat" class="tab-content active"><ul class="list" id="visit-history-list"></ul></div>
                        <div id="hasil-lab" class="tab-content"><canvas id="patient-lab-chart" style="max-height: 250px;"></canvas></div>
                        <div id="tagihan" class="tab-content"><table class="data-table"><thead><tr><th>Tanggal</th><th>Deskripsi</th><th>Jumlah</th><th>Status</th></tr></thead><tbody id="billing-table-body"></tbody></table><button id="download-bill-btn" class="btn btn-primary" style="margin-top: 1.5rem;"><i data-feather="download"></i> Unduh Semua Tagihan</button></div>
                    </div>
                </div>
            </div>

            <!-- Appointments View -->
            <div id="appointments-view" class="view-container hidden">
                <div class="card">
                    <div class="card-header">
                        <h3>Daftar Janji Temu</h3>
                        <button class="btn btn-primary" onclick="alert('Membuka form pendaftaran janji temu baru...')"><i data-feather="plus"></i> Buat Janji Temu Baru</button>
                    </div>
                    <div class="card-body">
                        <table class="data-table">
                            <thead><tr><th>Tanggal & Waktu</th><th>Dokter</th><th>Spesialisasi</th><th>Status</th></tr></thead>
                            <tbody id="all-appointments-list"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Documents View -->
            <div id="documents-view" class="view-container hidden">
                <div class="card">
                    <div class="card-header"><h3>Dokumen Medis Saya</h3></div>
                    <div class="card-body">
                        <ul class="document-list">
                            <li><i data-feather="file-text"></i><span>Hasil Lab Darah - 15 Okt 2023.pdf</span><button class="btn btn-secondary"><i data-feather="download"></i></button></li>
                            <li><i data-feather="file-text"></i><span>Ringkasan Konsultasi - 10 Okt 2023.pdf</span><button class="btn btn-secondary"><i data-feather="download"></i></button></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Profile View -->
            <div id="profile-view" class="view-container hidden">
                <div class="card">
                    <div class="card-header"><h3>Profil Saya</h3></div>
                    <div class="card-body">
                        <form id="patient-profile-form">
                            <div class="form-group"><label for="profile-name">Nama Lengkap</label><input type="text" id="profile-name" class="form-input"></div>
                            <div class="form-group"><label for="profile-dob">Tanggal Lahir</label><input type="date" id="profile-dob" class="form-input"></div>
                            <div class="form-group"><label for="profile-contact">Nomor Telepon</label><input type="tel" id="profile-contact" class="form-input"></div>
                            <button type="submit" class="btn btn-primary">Simpan Perubahan</button>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script src="assets/js/script.js"></script>
</body>
</html>